$(document).ready(function(){function S(e){var t=T(e);if(t==-1){return false}return E[t]!=999}function T(e){var t=-1;if(e===0){return t}for(var n=0;n<E.length;n++){if(E[n]==e){t=n;break}}return t}function N(){if(u===""){return"You haven't moved yet, silly goose!"}else{return u}}function C(){$("#progressOutput").empty();if(a){H("You start your journey off at "+d[n]);a=false}else{H("You have ventured into "+d[n])}var r=T(n);if(r!=-1){H("You can see a "+y[r%y.length]+". Enter 'P' to pick it up!")}else{var s;var o="There is nothing of interest here";switch(d[n]){case c:o="";s="The Shipper is here, I hope you have what it takes to destroy it.";break;case h:o="";s="There are rumours one named the Big 4 lies here and is prone to attack.";break;case"Cat Cafe":s=". AW CATS!";break;case"Alexs House":s=" assuming you're ignoring that cool guy named Alex.";break;case"Dance Cave":s=" but you can spare a few moments to dance, no?";break;case"Construction Zone":s=" minus some headaches and rubberneckers.";break;case p:o="";s="NEGA-BEA's Lair! Your opposite, your negative. (so probably a bit cooler)";break;case"Markham":s=". Pretty boring.";break;case"Zanzibar VIP Room":s=", well...";break;case"CN Tower":s=" except an increasing fear of heights.";break;case"Honest Eds":s=" besides some good deals.";break;default:s=".";break}H(o+s)}H("<br/>You can move in one of the following directions: "+M(g[n]));P();B(e);j(t);F(N());if(b.length>0){I()}if(i){alertify.set({labels:{ok:"Fine."}});alertify.alert("<div class='alertnotification'>Game Over</div>",function(e){if(e){location.reload()}})}}function k(e){if(e>d.length){return"Nowhere"}else{return d[e]}}function L(e){for(var t in b){if(b[t]==y[e%y.length]){return true}}return false}function A(){return O(0,101)%y.length}function O(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function M(e){var t="";if(e!==null){for(var n=0;n<e.length;n++){if(n===e.length-1){t+=e.substring(n,n+1)}else if(n===e.length-2){t+=e.substring(n,n+1)+" & "}else{t+=e.substring(n,n+1)+", "}}}return t}function _(){f++}function D(){return f}function P(){$("#currentMoveCount").html(f)}function H(e){$("#progressOutput").html($("#progressOutput").html()+e+"<br/>")}function B(e){$("#userHP").html(e)}function j(e){$("#userLightLevel").html(e)}function F(e){$("#userLastDirection").html(e)}function I(){$("#inventoryList").empty();var e="";b.forEach(function(t){e+="<li>"+t+"</li>"});$("#inventoryList").html("<ul>"+e+"</ul>")}function q(e){alertify.success("<span class='fui-check'></span>&nbsp;&nbsp;&nbsp;Moved "+e)}function R(e){alertify.error("<span class='fui-cross'></span>&nbsp;&nbsp;&nbsp;Can't move in the "+e+" direction.")}function U(e,t){alertify.error("<span class='fui-heart'></span>&nbsp;&nbsp;&nbsp;You lost "+e+" HP to "+t+".")}function z(){alertify.error("<span class='fui-heart'></span>&nbsp;&nbsp;&nbsp;You died.")}function W(e){alertify.success("<span class='fui-user'></span>&nbsp;&nbsp;&nbsp;You destroyed "+e)}function X(e,t){alertify.set({labels:{ok:t}});alertify.alert('<div class="alertnotification">'+e+"</div>")}function V(e,t,n){alertify.set({labels:{ok:t}});alertify.alert('<div class="alertnotification">'+e+"</div>",n)}function J(t){trimCommand=$.trim(t);Q(t);if(!l){return}if(k(n)==p&&s){var r=y.indexOf("Power of Love");var u=y.indexOf("Power of Self Respect");if(L(r)){X("Nega-Bea appeared and attacked but YOU had the "+y[r]+" so it's dead.","Yay now dismiss.");s=false;W("Nega-Bea")}else if(L(u)){X("Nega-Bea appeared and attacked but YOU had the "+y[u]+" so it's dead.","Yay now dismiss.");s=false;W("Nega-Bea")}else{V("Nega-Bea appeared and attacked your self-esteem.<br/>You got hurt but not badly.","Dismiss because you feel bad.",function(t){if(t){U(1,"Nega-Bea");e--;if(e<=0){e=0;z();i=true}C()}})}}if(k(n)==c&&o){var a=y.indexOf("Exodia Deck");var f=y.indexOf("Reality Cheque");if(L(a)&&L(f)){X("The Shipper appeared but you attacked it by using obliderate from the "+y[a]+" and cashing in the "+y[f]+"!<br/><br/>He will no longer suggest weird ships and you "+"got your cellphone back!<br/><br/>You finished in "+D()+" moves.","Congratulation!");o=false;i=true}else{V("The Shipper appeared and attacked you with its uncomfortable fan fiction. Tough luck kid, you're dead.","Dismiss",function(t){if(t){e=0;z();i=true;C()}})}}if(k(n)==h){var d=A();if(L(d)){X("You heard your phone ring and because you had "+y[d]+". You were safe from a potential attack","Dismiss")}else{V("You heard your cellphone ring but the Big 4 attacked you<br/>in the dark before you could make sense "+"of it!<br/>You got hurt physically and emotionally.","Dismiss",function(t){if(t){U(4,"Big 4");e=e-4;if(e<=0){e=0;z();i=true}C()}})}}C()}function K(e){var t=e;switch(e){case"NORTH":t="N";break;case"SOUTH":t="S";break;case"WEST":t="W";break;case"EAST":t="E";break;case"PICK UP":t="P";break;case"PICK-UP":t="P";break;case"ABOUT":t="A";break;default:break}return t}function Q(e){e=K(e.toUpperCase());var t=e;switch(e){case"N":if(g[n].indexOf(t)>-1){n-=8;u=e;_();q("North");l=true}else{R("North");l=false}break;case"S":if(g[n].indexOf(t)>-1){n+=8;u=e;_();q("South");l=true}else{R("South");l=false}break;case"E":if(g[n].indexOf(t)>-1){n++;u=e;_();q("East");l=true}else{R("East");l=false}break;case"W":if(g[n].indexOf(t)>-1){n--;u=e;_();q("West");l=true}else{R("West");l=false}break;case"P":x(n);l=false;break;case"A":alertify.set({labels:{ok:"Dismiss"}});alertify.alert("<div class='alertnotification'><span style='text-decoration: underline;'>About</span><br/>"+"<br/>A Game built for Bea.</div>");l=false;break;case"WHO IS BEA?":alertify.set({labels:{ok:"Dismiss"}});alertify.alert("<div class='alertnotification'>Ask her yourself.</div>");l=false;break;case"MEATBALLS":alertify.set({labels:{ok:"Dismiss"}});alertify.alert("<div class='alertnotification'>Stop that dipface :D</div>");l=false;break;case"DANCE":if(k(n)=="Dance Cave"){alertify.set({labels:{ok:"Dismiss"}});var r=O(1,4);var i="Stop that dancing, Kevin Bacon.";switch(r){case 1:i="You performed a interpretative dance, it wasn't very effective.";break;case 2:i="Zuko and you performed the Dancing Dragon but you still need to finish this game.";break;case 3:i="(>'-')> <('-'<) ^('-')^ v('-')v <('-'<) ^('-')^ (>'-')>";break;default:break}alertify.alert("<div class='alertnotification'>"+i+"</div>")}l=false;break;default:alertify.set({labels:{ok:"I have learned the errors of my ways."}});alertify.alert("<div class='alertnotification'>Opps, only the following commands are valid:<br/><ul><li>N (North)</li>"+"<li>S (South)</li><li>E (East)</li><li>W (West)</li><li>P (Pick up)</li><li>A (About)</li></ul></div>");l=false;break}}alertify.set({labels:{ok:"Ok, I got it."}});alertify.alert("<div class='alertnotification'>Not so long ago in the mysterious land of Toronto, Canada...<br/>"+"A cellphone was lost...</br><br/>"+"Search through each of the rooms for valuable items needed to destroy and retrieve the lost nexus "+"from the one known as the Shipper.<br/>It is rumoured that his weakness is an Exodia Deck and a Reality "+"Cheque<br/><br/>The following commands are valid:<br/><ul><li>N (North)</li><li>S (South)</li>"+"<li>E (East)</li><li>W (West)</li><li>P (Pick up)</li><li>A (About)</li></ul></div>",function(e){if(e){$("#userInput").focus()}});var e=10,t=100,n=0,r=31,i=false,s=true,o=true,u="",a=true,f=0,l=true;var c="Shippers Lair";var h="Area with good Wind reception (Rare)";var p="Hammark";var d=["Union Station","Honest Eds","Rogers Center","CN Tower","Air Canada Center","The Distillery District","Snakes and Lattes","Alex's House","Dance Cave","Sewers",p,"Zanzibar VIP Room","Zanzibar VIP Room","Curling Rink","Taxi","Curling Rink","Markham","Construction Zone","Construction Zone","Concrete Jungle","Greenhouse","The Annex","Cat Cafe","Dance Cave","Sewers",h,"Zanzibar VIP Room","Sneaky Dees","Curling Rink","Taxi",c];var v=[0,10,25,30];var m=[1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29];var g=["E","SWE","WE","SWE","WE","WE","SWE","WS","NSE","SE","WE","NW","SE","W","SNE","NSW","NS","NS","SE","WE","NWE","SWE","WS","N","N","NWE","NWE","WE","WE","NW","NE","W"];var y=["Chocolate Cake","Map of Toronto","Swiss Army Knife","Mint Bag","Goblet of Fire (The Book)","Exodia Deck","Coins for TTC","Helmet for Walking","Ear Wax (Not yours)","Poutine from PoutineVille","Reality Cheque","Avenue-Q on Blu-Ray","Markham Street Cred","The missing T in Torono","Power of Self Respect","Guru Laghima Figurine (An Airbender)","Power of Love","Old embrassing home video"];var b=[];b[0]="Metro Pass";var w=m.sort(function(){return.5-Math.random()});var E=w.slice(0,19);var x=function(e){if(S(e)){var t=T(e);b[b.length]=y[t%y.length];E[t]=999;alertify.success("You successfully picked up "+y[t%y.length])}else{alertify.error("There are no items to pick up here")}};$("#input form").submit(function(e){J($("#userInput").val());$("#userInput").val("");e.preventDefault()});C()})
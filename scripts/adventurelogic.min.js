$(document).ready(function(){function E(e){var t=x(e);if(t==-1){return false}return w[t]!=999}function x(e){var t=-1;if(e===0){return t}for(var n=0;n<w.length;n++){if(w[n]==e){t=n;break}}return t}function T(){if(u===""){return"You haven't moved yet, silly goose!"}else{return u}}function N(){$("#progressOutput").empty();if(a){D("You start your journey off at "+p[n]);a=false}else{D("You have ventured into "+p[n])}var r=x(n);if(r!=-1){D("You can see a "+g[r%g.length]+". Enter 'P' to pick it up!")}else{var s;var o="There is nothing of interest here";switch(p[n]){case l:o="";s="The Shipper is here, I hope you have what it takes to destroy it.";break;case c:o="";s="There are rumours one named the Big 4 lies here and is prone to attack.";break;case"Cat Cafe":s=". AW CATS!";break;case"Alexs House":s=" assuming you're ignoring that cool guy named Alex.";break;case"Dance Cave":s=" but you can spare a few moments to dance, no?";break;case"Construction Zone":s=" minus some headaches and rubberneckers.";break;case h:o="";s="NEGA-BEA's Lair! Your opposite, your negative. (so probably a bit cooler)";break;case"Markham":s=". Pretty boring.";break;case"Zanzibar VIP Room":s=", well...";break;case"CN Tower":s=" except an increasing fear of heights.";break;case"Honest Eds":s=" besides some good deals.";break;default:s=".";break}D(o+s)}D("<br/>You can move in one of the following directions: "+A(m[n]));_();P(e);H(t);B(T());if(y.length>0){j()}if(i){alertify.set({labels:{ok:"Fine."}});alertify.alert("<div class='alertnotification'>Game Over</div>",function(e){if(e){location.reload()}})}}function C(e){if(e>p.length){return"Nowhere"}else{return p[e]}}function k(e){for(var t in y){if(y[t]==g[e%g.length]){return true}}return false}function L(){return Math.floor(Math.random()*101)%g.length}function A(e){var t="";if(e!==null){for(var n=0;n<e.length;n++){if(n===e.length-1){t+=e.substring(n,n+1)}else if(n===e.length-2){t+=e.substring(n,n+1)+" & "}else{t+=e.substring(n,n+1)+", "}}}return t}function O(){f++}function M(){return f}function _(){$("#currentMoveCount").html(f)}function D(e){$("#progressOutput").html($("#progressOutput").html()+e+"<br/>")}function P(e){$("#userHP").html(e)}function H(e){$("#userLightLevel").html(e)}function B(e){$("#userLastDirection").html(e)}function j(){$("#inventoryList").empty();var e="";y.forEach(function(t){e+="<li>"+t+"</li>"});$("#inventoryList").html("<ul>"+e+"</ul>")}function F(e){alertify.success("<span class='fui-check'></span>&nbsp;&nbsp;&nbsp;Moved "+e)}function I(e){alertify.error("<span class='fui-cross'></span>&nbsp;&nbsp;&nbsp;Can't move in the "+e+" direction.")}function q(e,t){alertify.error("<span class='fui-heart'></span>&nbsp;&nbsp;&nbsp;You lost "+e+" HP to "+t+".")}function R(){alertify.error("<span class='fui-heart'></span>&nbsp;&nbsp;&nbsp;You died.")}function U(e){alertify.success("<span class='fui-user'></span>&nbsp;&nbsp;&nbsp;You destroyed "+e)}function z(e,t){alertify.set({labels:{ok:t}});alertify.alert('<div class="alertnotification">'+e+"</div>")}function W(e,t,n){alertify.set({labels:{ok:t}});alertify.alert('<div class="alertnotification">'+e+"</div>",n)}function X(t){trimCommand=$.trim(t);J(t);if(C(n)==h&&s){var r=g.indexOf("Power of Love");var u=g.indexOf("Power of Self Respect");if(k(r)){z("Nega-Bea appeared and attacked but YOU had the "+g[r]+" so it's dead.","Yay now dismiss.");s=false;U("Nega-Bea")}else if(k(u)){z("Nega-Bea appeared and attacked but YOU had the "+g[u]+" so it's dead.","Yay now dismiss.");s=false;U("Nega-Bea")}else{W("Nega-Bea appeared and attacked your self-esteem.<br/>You got hurt but not badly.","Dismiss because you feel bad.",function(t){if(t){q(1,"Nega-Bea");e--;if(e<=0){e=0;R();i=true}N()}})}}if(C(n)==l&&o){var a=g.indexOf("Exodia Deck");var f=g.indexOf("Reality Cheque");if(k(a)&&k(f)){z("The Shipper appeared but you attacked it by using obliderate from the "+g[a]+" and cashing in the "+g[f]+"!<br/><br/>He will no longer suggest weird ships and you "+"got your cellphone back!<br/><br/>You finished in "+M()+" moves.","Congratulation!");o=false;i=true}else{W("The Shipper appeared and attacked you with its uncomfortable fan fiction. Tough luck kid, you're dead.","Dismiss",function(t){if(t){e=0;R();i=true;N()}})}}if(C(n)==c){var p=L();if(k(p)){z("You heard your phone ring and because you had "+g[p]+". You were safe from a potential attack","Dismiss")}else{W("You heard your cellphone ring but the Big 4 attacked you<br/>in the dark before you could make sense "+"of it!<br/>You got hurt physically and emotionally.","Dismiss",function(t){if(t){q(4,"Big 4");e=e-4;if(e<=0){e=0;R();i=true}N()}})}}N()}function V(e){var t=e;switch(e){case"NORTH":t="N";break;case"SOUTH":t="S";break;case"WEST":t="W";break;case"EAST":t="E";break;case"PICK UP":t="P";break;case"PICK-UP":t="P";break;case"ABOUT":t="A";break;default:break}return t}function J(e){e=V(e.toUpperCase());var t=e;switch(e){case"N":if(m[n].indexOf(t)>-1){n-=8;u=e;O();F("North")}else{I("North")}break;case"S":if(m[n].indexOf(t)>-1){n+=8;u=e;O();F("South")}else{I("South")}break;case"E":if(m[n].indexOf(t)>-1){n++;u=e;O();F("East")}else{I("East")}break;case"W":if(m[n].indexOf(t)>-1){n--;u=e;O();F("West")}else{I("West")}break;case"P":S(n);break;case"A":alertify.set({labels:{ok:"Dismiss"}});alertify.alert("<div class='alertnotification'><span style='text-decoration: underline;'>About</span><br/>"+"<br/>A Game built for Bea.</div>");break;case"WHO IS BEA?":alertify.set({labels:{ok:"Dismiss"}});alertify.alert("<div class='alertnotification'>Ask her yourself.</div>");break;case"MEATBALLS":alertify.set({labels:{ok:"Dismiss"}});alertify.alert("<div class='alertnotification'>Stop that dipface :D</div>");break;default:alertify.set({labels:{ok:"I have learned the errors of my ways."}});alertify.alert("<div class='alertnotification'>Opps, only the following commands are valid:<br/><ul><li>N (North)</li>"+"<li>S (South)</li><li>E (East)</li><li>W (West)</li><li>P (Pick up)</li><li>A (About)</li></ul></div>");break}}alertify.set({labels:{ok:"Ok, I got it."}});alertify.alert("<div class='alertnotification'>Not so long ago in the mysterious land of Toronto, Canada...<br/>"+"A cellphone was lost...</br><br/>"+"Search through each of the rooms for valuable items needed to destroy and retrieve the lost nexus "+"from the one known as the Shipper.<br/>It is rumoured that his weakness is an Exodia Deck and a Reality "+"Cheque<br/><br/>The following commands are valid:<br/><ul><li>N (North)</li><li>S (South)</li>"+"<li>E (East)</li><li>W (West)</li><li>P (Pick up)</li><li>A (About)</li></ul></div>",function(e){if(e){$("#userInput").focus()}});var e=10,t=100,n=0,r=31,i=false,s=true,o=true,u="",a=true,f=0;var l="Shippers Lair";var c="Area with good Wind reception (Rare)";var h="Hammark";var p=["Union Station","Honest Eds","Rogers Center","CN Tower","Air Canada Center","The Distillery District","Snakes and Lattes","Alex's House","Dance Cave","Sewers",h,"Zanzibar VIP Room","Zanzibar VIP Room","Curling Rink","Taxi","Curling Rink","Markham","Construction Zone","Construction Zone","Concrete Jungle","Greenhouse","The Annex","Cat Cafe","Dance Cave","Sewers",c,"Zanzibar VIP Room","Sneaky Dees","Curling Rink","Taxi",l];var d=[0,10,25,30];var v=[1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29];var m=["E","SWE","WE","SWE","WE","WE","SWE","WS","NSE","SE","WE","NW","SE","W","SNE","NSW","NS","NS","SE","WE","NWE","SWE","WS","N","N","NWE","NWE","WE","WE","NW","NE","W"];var g=["Chocolate Cake","Map of Toronto","Swiss Army Knife","Mint Bag","Goblet of Fire (The Book)","Exodia Deck","Coins for TTC","Helmet for Walking","Ear Wax (Not yours)","Poutine from PoutineVille","Reality Cheque","Avenue-Q on Blu-Ray","Markham Street Cred","The missing T in Torono","Power of Self Respect","Guru Laghima Figurine (An Airbender)","Power of Love","Old embrassing home video"];var y=[];y[0]="Metro Pass";var b=v.sort(function(){return.5-Math.random()});var w=b.slice(0,19);var S=function(e){if(E(e)){var t=x(e);y[y.length]=g[t%g.length];w[t]=999;alertify.success("You successfully picked up "+g[t%g.length])}else{alertify.error("There are no items to pick up here")}};$("#input form").submit(function(e){X($("#userInput").val());$("#userInput").val("");e.preventDefault()});N()})
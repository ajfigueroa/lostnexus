$(document).ready(function(){function d(e){var t=m(e);if(t==-1){return false}return p[t]!=999}function m(e){var t=-1;if(e==0){return t}for(var n=0;n<p.length;n++){if(p[n]==e){t=n;break}}return t}function g(){if(lastDirection==""){return"You haven't moved yet, silly goose!"}else{return lastDirection}}function y(){$("#progressOutput").empty();if(firstTime){C("You start your journey off at "+o[n]);firstTime=false}else{C("You have ventured into "+o[n])}var r=m(n);if(r!=-1){C("You can see a "+l[r%l.length]+". Enter 'P' to pick it up!")}else{var i;var u="There is nothing of interest here";switch(o[n]){case"Shippers Lair":u="";i="The Shipper is here, I hope you have what it takes to destroy it.";break;case"Area with good Wind reception (Rare)":u="";i="There are rumours one named the Big 4 lies here and is prone to attack.";break;case"Cat Cafe":i=". AW CATS!";break;case"Alexs House":i=" assuming you're ignoring that cool guy named Alex.";break;case"Dance Cave":i=" but you can spare a few moments to dance, no?";break;case"Construction Zone":i=" minus some headaches and rubberneckers.";break;case"Hammark":u="";i="NEGA-BEA's Lair! Your opposite, your negative. (so probably a bit cooler)";break;case"Markham":i=". Enough said.";break;case"Zanzibar VIP Room":i=", well...";break;case"CN Tower":i=" except an increasing fear of heights.";break;case"Honest Eds":i=" besides some good deals.";break;default:i=".";break}C(u+i)}C("<br/>You can move in one of the following directions: "+S(f[n]));N();k(e);L(t);A(g());if(c.length>0){O()}if(s){alertify.set({labels:{ok:"Fine."}});alertify.alert("<div class='alertnotification'>Game Over</div>",function(e){if(e){location.reload()}})}}function b(e){if(e>o.length){return"Nowhere"}else{return o[e]}}function w(e){for(var t in c){if(c[t]==l[e%l.length]){return true}}return false}function E(){return Math.floor(Math.random()*101)%l.length}function S(e){var t="";if(e!=null){for(i=0;i<e.length;i++){if(i===e.length-1){t+=e.substring(i,i+1)}else if(i===e.length-2){t+=e.substring(i,i+1)+" & "}else{t+=e.substring(i,i+1)+", "}}}return t}function x(){currentNumberOfMoves++}function T(){return currentNumberOfMoves}function N(){$("#currentMoveCount").html(currentNumberOfMoves)}function C(e){$("#progressOutput").html($("#progressOutput").html()+e+"<br/>")}function k(e){$("#userHP").html(e)}function L(e){$("#userLightLevel").html(e)}function A(e){$("#userLastDirection").html(e)}function O(){$("#inventoryList").empty();var e="";c.forEach(function(t){e+="<li>"+t+"</li>"});$("#inventoryList").html("<ul>"+e+"</ul>")}function M(e){alertify.success("<span class='fui-check'></span>&nbsp;&nbsp;&nbsp;Moved "+e)}function _(e){alertify.error("<span class='fui-cross'></span>&nbsp;&nbsp;&nbsp;Can't move in the "+e+" direction.")}function D(e,t){alertify.error("<span class='fui-heart'></span>&nbsp;&nbsp;&nbsp;You lost "+e+" HP to "+t+".")}function P(){alertify.error("<span class='fui-heart'></span>&nbsp;&nbsp;&nbsp;You died.")}function H(e){alertify.success("<span class='fui-user'></span>&nbsp;&nbsp;&nbsp;You destroyed "+e)}function B(e,t){alertify.set({labels:{ok:t}});alertify.alert('<div class="alertnotification">'+e+"</div>")}function j(t){trimCommand=$.trim(t);I(t);if(b(n)=="Hammark"&&isNegaBeaAlive){var r=l.indexOf("Power of Love");var i=l.indexOf("Power of Self Respect");if(w(r)){B("Nega-Bea appeared and attacked but YOU had the "+l[r]+" so it's dead.","Yay now dismiss.");isNegaBeaAlive=false;H("Nega-Bea")}else if(w(i)){B("Nega-Bea appeared and attacked but YOU had the "+l[i]+" so it's dead.","Yay now dismiss.");isNegaBeaAlive=false;H("Nega-Bea")}else{B("Nega-Bea appeared and attacked your self-esteem.<br/>You got hurt.","Dismiss because you feel bad.");D(1,"Nega-Bea");e--;if(e<=0){P();s=true}}}if(b(n)=="Shippers Lair"&&isShipperAlive){var o=l.indexOf("Exodia Deck");var u=l.indexOf("Reality Cheque");if(w(o)&&w(u)){B("The Shipper appeared but you attacked it by using obliderate from the "+l[o]+" and cashing in the "+l[u]+"!<br/><br/>He will no longer suggest weird ships and you "+"got your cellphone back!<br/><br/>You finished in "+T()+" moves.","Congratulation!");isShipperAlive=false;s=true}else{B("The Shipper appeared and attacked you with its uncomfortable fan fiction. Tough luck kid, you're dead.","Dismiss");e=0;P();s=true}}if(b(n)=="Area with good Wind reception (Rare)"){var a=E();if(w(a)){B("You heard your phone ring and because you had "+l[a]+". You were safe from a potential attack","Dismiss")}else{B("You heard your cellphone ring but something attacked you in the dark before you could make sense of it!<br/>You got hurt physically and emotionally.","Dismiss");e=e-2;D(2,"Big 4");if(e<=0){P();s=true}}}y()}function F(e){var t=e;switch(e){case"NORTH":t="N";break;case"SOUTH":t="S";break;case"WEST":t="W";break;case"EAST":t="E";break;case"PICK UP":t="P";break;case"PICK-UP":t="P";break;case"ABOUT":t="A";break;default:break}return t}function I(e){e=F(e.toUpperCase());var t=e;switch(e){case"N":if(f[n].indexOf(t)>-1){n-=8;lastDirection=e;x();M("North")}else{_("North")}break;case"S":if(f[n].indexOf(t)>-1){n+=8;lastDirection=e;x();M("South")}else{_("South")}break;case"E":if(f[n].indexOf(t)>-1){n++;lastDirection=e;x();M("East")}else{_("East")}break;case"W":if(f[n].indexOf(t)>-1){n--;lastDirection=e;x();M("West")}else{_("West")}break;case"P":v(n);break;case"A":alertify.set({labels:{ok:"Dismiss"}});alertify.alert("<div class='alertnotification'><span style='text-decoration: underline;'>About</span><br/><br/>A Game built for Bea.</div>");break;case"WHO IS BEA?":alertify.set({labels:{ok:"Dismiss"}});alertify.alert("<div class='alertnotification'>Ask her yourself.</div>");break;case"MEATBALLS":alertify.set({labels:{ok:"Dismiss"}});alertify.alert("<div class='alertnotification'>Stop that dipface :D</div>");break;default:alertify.set({labels:{ok:"I have learned the errors of my ways."}});alertify.alert("<div class='alertnotification'>Opps, only the following commands are valid:<br/><ul><li>N (North)</li><li>S (South)</li><li>E (East)</li><li>W (West)</li><li>P (Pick up)</li><li>A (About)</li></ul></div>");break}}alertify.set({labels:{ok:"Ok, I got it."}});alertify.alert("<div class='alertnotification'>Not so long ago in the mysterious land of Toronto, Canada...<br/>"+"A cellphone was lost...</br><br/>"+"Search through each of the rooms for valuable items needed to destroy and retrieve the lost nexus "+"from the one known as the Shipper.<br/>It is rumoured that his weakness is an Exodia Deck and a Reality "+"Cheque<br/><br/>The following commands are valid:<br/><ul><li>N (North)</li><li>S (South)</li>"+"<li>E (East)</li><li>W (West)</li><li>P (Pick up)</li><li>A (About)</li></ul></div>");var e=10,t=100,n=0,r=31,s=false;isNegaBeaAlive=true,isShipperAlive=true,lastDirection="",firstTime=true,currentNumberOfMoves=0;var o=new Array("Union Station","Honest Eds","Rogers Center","CN Tower","Air Canada Center","The Distillery District","Snakes and Lattes","Alex's House","Dance Cave","Sewers","Hammark","Zanzibar VIP Room","Zanzibar VIP Room","Curling Rink","Taxi","Curling Rink","Markham","Construction Zone","Construction Zone","Concrete Jungle","Greenhouse","The Annex","Cat Cafe","Dance Cave","Sewers","Area with good Wind reception (Rare)","Zanzibar VIP Room","Sneaky Dees","Curling Rink","Taxi","Shippers Lair");var u=[0,10,25,30];var a=[1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29];var f=new Array("E","SWE","WE","SWE","WE","WE","SWE","WS","NSE","SE","WE","NW","SE","W","SNE","NSW","NS","NS","SE","WE","NWE","SWE","WS","N","N","NWE","NWE","WE","WE","NW","NE","W");var l=new Array("Chocolate Cake","Map of Toronto","Swiss Army Knife","Mint Bag","Goblet of Fire (The Book)","Exodia Deck","Coins for TTC","Helmet for Walking","Ear Wax (Not yours)","Plastic Cell Phone","Poutine from PoutineVille","Reality Cheque","Avenue-Q on Blu-Ray","Markham Street Cred","The missing T in Torono","Power of Self Respect","Pestro Card","Guardian Angel","Power of Love","Old embrassing home video");var c=new Array;c[0]="Metro Pass";var h=a.sort(function(){return.5-Math.random()});var p=h.slice(0,15);$("#userInput").focus();var v=function(e){if(d(e)){var t=m(e);c[c.length]=l[t%l.length];p[t]=999;alertify.success("You successfully picked up "+l[t%l.length])}else{alertify.error("There are no items to pick up here")}};$("#input form").submit(function(e){j($("#userInput").val());$("#userInput").val("");e.preventDefault()});y()})